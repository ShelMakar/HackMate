{% load static %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="{% url 'homepage:homepage' %}">
    <img src="{% static 'logo/favicon.ico' %}" width="48">
  </a>
  {% with request.resolver_match.view_name as view_name %}
  <article class="navbar-nav list-group">
    <a class="{% if view_name == 'homepage:homepage' %}list-group-item list-group-item-info {% endif %}" href="{% url 'homepage:homepage' %}">Главная</a>
    <a class="{% if view_name == 'vacancies:vacancies' %}list-group-item list-group-item-info {% endif %}" href="{% url 'vacancies:vacancies' %}">Найти команду</a>
    {% if not request.user.is_authenticated %}
			<a href="{% url 'users:signup' %}" class="{% if view_name == 'users:signup' %}list-group-item list-group-item-info {% endif %}">Регистрация</a>
			<a href="{% url 'users:login' %}" class="{% if view_name == 'users:login' %}list-group-item list-group-item-info {% endif %}">Авторизация</a>
		{% else %}
      <a href="{% url 'vacancies:user_responses' %}" class="{% if view_name == 'vacancies:user_responses' %}list-group-item list-group-item-info {% endif %}">Мои отклики</a>
      <a href="{% url 'vacancies:user_vacancies' %}" class="{% if view_name == 'vacancies:user_vacancies' %}list-group-item list-group-item-info {% endif %}">Мои вакансии</a>
    {% if request.user.is_superuser %}
      <a href="/admin/">Админка</a>
    {% endif %}
    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <button class="btn btn-dark dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            {% if request.user.profile.image %}
              <img src="{{ request.user.profile.image.url }}" alt="" class="dropdown-image">
            {% else %}
              <img src="{% static 'img/default-avatar.jpg' %}" alt="Default Avatar" class="dropdown-image">
            {% endif %}
              <p class="dropdown-username">{{ request.user.username }}</p>
          </button>
          <ul class="dropdown-menu">
            <li><a href="{% url 'users:profile' username=user %}" class="dropdown-item">Профиль</a></li>
            <li><a href="{% url 'users:profile_edit' %}" class="dropdown-item">Редактирование профиля</a></li>
            <li><a href="{% url 'users:logout' %}" class="dropdown-item">Выйти</a></li>
          </ul>
        </li>
      </ul>
    </div>
    {% endif %}
  </article>
  {% endwith %}
</nav>
